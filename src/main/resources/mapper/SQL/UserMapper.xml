<?xml version ="1.0" encoding ="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- Mapperとxml の マッピング -->
<mapper namespace ="com.example.demo.repository.UserMapper">

<!-- マッピング 定義( ユーザー) -->
<resultMap type ="com.example.demo.domain.user.model.MUser" id ="user">
<id column ="user_id" property ="userId"/>
<result column ="password" property ="password"/>
<result column ="user_name" property ="userName"/>
<result column ="birthday" property ="birthday"/>
<result column ="age" property ="age"/>
<result column ="gender" property ="gender"/>
<result column ="department_id" property ="departmentId"/>
<result column ="role" property ="role"/>
<!-- <association property ="department" resultMap ="department"/>
<collection property ="salaryList" resultMap ="salary" columnPrefix ="salary_"/> -->
</resultMap>



<!-- ユーザー 1 件 登録 -->
	<insert id ="insertOne">
		insert into m_user(
			user_id
			,password
			,user_name
			,birthday
			,age
			,gender
			,department_id
			,role
		)
		values (
		#{userId}
		,#{password}
		,#{userName}
		,#{birthday}
		,#{age}
		,#{gender}
		,#{departmentId}
		,#{role}
		)
	</insert>
	
<!-- ユーザー 複数 件 取得 -->
	<select id ="findMany" resultType ="MUser">
	 select
	 *
	 from
		 m_user
	 <where>
	 <if test ="userId != null">
	 	user_id like'%'||#{userId}||'%'
	 </if >
	 <if test ="userName != null">
	 	and user_name like'%'||#{userName}||'%'
	 </if >
	 </where>
	 </select>
	 
	 
<!-- ユーザー 1 件 検索 -->
	<select id ="findOne" resultMap ="user">
	select
	 *
	from 
		m_user
	where
		m_user.user_id = #{userId}
	</select>
	
<!-- ユーザー 1 件 更新 -->
	 <update id ="updateOne">
	 update
	 	m_user
	 set
	 password = #{password}
	 ,user_name = #{userName}
	 where
	 user_id = #{userId}
	 </update>
	 
	 <!-- ユーザー 1 件 削除 -->
	 <delete id ="deleteOne">
	 delete from
	 	m_user
	 where
	 	user_id = #{userId}
	 </delete>



 
</mapper>